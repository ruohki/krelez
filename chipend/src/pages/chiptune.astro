---
import Layout from "../layouts/main.astro";
import { Icon } from "astro-icon/components";
import ChiptunePlayer from "../components/chiptuneplayer.tsx";
import { getSecret } from "astro:env/server";

const ICEPRXY_CHIPTUNE_URL = getSecret("ICEPRXY_CHIPTUNE_URL");
const CHIPTUNE_STREAM_URL = getSecret("CHIPTUNE_STREAM_URL");
---

<Layout>
	<div class="min-h-screen flex flex-col bg-gray-900">
    <div class="container mx-auto px-4 flex flex-col min-h-screen">
      <a 
        href="/" 
        class="pixel-text mt-4 inline-flex items-center hover:opacity-80 transition-opacity w-fit"
      >
        <Icon name="lucide:arrow-left" class="mr-2" size={24} />
        Back to Home
      </a>
      <div class="flex-1 flex items-center justify-center">
        <ChiptunePlayer client:load streamUrl={CHIPTUNE_STREAM_URL} apiBaseUrl={ICEPRXY_CHIPTUNE_URL}/>
      </div>
    </div>
  </div>
</Layout>